<div class="cabecera">
  <img class="img" src="../../../assets/images/cabecera.png" alt="Logo" height="120px">
</div>

<div class="main">
  <h2>LISTAR USUARIOS</h2>
  <div>
    <div>
      <!--<button *ngIf="rolUsuario === 'Emprendedor'" type="button" class="btn btn-primary mr-3">Mis Proyectos</button>-->
      <button type="button" routerLink="/addusuario" class="btn btn-secondary mr-3 mb-3">Agregar Usuario</button> <!--Botón para el usuario Admin-->
    </div>
  </div>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Username</th>
        <th>Correo</th>
        <th>Dirección</th>
        <th>Comuna</th>
        <th>Región</th>
        <th>Rol</th>
        <th>Teléfono</th>
        <th>Fecha Creación</th>
        <th>Fecha Actualización</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let usuario of usuarios">
        <td>{{ usuario.idUsuario }}</td>
        <td>{{ usuario.nombre }}</td>
        <td>{{ usuario.apellido }}</td>
        <td>{{ usuario.username }}</td>
        <td>{{ usuario.correo }}</td>
        <td>{{ usuario.direccion }}</td>
        <td>{{ usuario.idComuna }}</td>
        <td>{{ usuario.idRegion }}</td>
        <td>{{ usuario.idRol }}</td>
        <td>{{ usuario.telefono }}</td>
        <td>{{ usuario.createAt }}</td>
        <td>{{ usuario.updateAt }}</td>
        <td>
          <button (click)="editarUsuario(usuario, contenidoModal)" class="btn btn-sm btn-primary">Editar</button>
          <button (click)="eliminarUsuario(usuario.idUsuario!)" class="btn btn-sm btn-danger">Eliminar</button>

        </td>
      </tr>
    </tbody>
  </table>
</div>
<ng-template #contenidoModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">EDITAR USUARIO</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="usuarioForm">
      <div class="mb-3">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" formControlName="nombre" class="form-control">
      </div>
      <div class="mb-3">
        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" formControlName="apellido" class="form-control">
      </div>
      <div class="mb-3">
        <label for="username">Username:</label>
        <input type="text" id="username" formControlName="username" class="form-control">
      </div>
      <div class="mb-3">
        <label for="contrasena">Contraseña:</label>
        <input type="password" id="contrasena" formControlName="contrasena" class="form-control">
      </div>
      <div class="mb-3">
        <label for="correo">Correo:</label>
        <input type="email" id="correo" formControlName="correo" class="form-control">
      </div>
      <div class="mb-3">
        <label for="direccion">Dirección:</label>
        <input type="text" id="direccion" formControlName="direccion" class="form-control">
      </div>
      <div class="mb-3 d-flex align-items-center">
        <label for="idRegion" class="form-label me-3">Región:</label>
        <select id="idRegion" name="idRegion" class="form-control custom-input" formControlName="idRegion">
          <option value="" selected>Selecciona región</option>
          <option value="1">Región de Arica y Parinacota</option>
          <option value="2">Región de Tarapacá</option>
          <option value="3">Región de Antofagasta</option>
          <option value="4">Región de Atacama</option>
          <option value="5">Región de Coquimbo</option>
          <option value="6">Región de Valparaíso</option>
          <option value="7">Región Metropolitana de Santiago</option>
          <option value="8">Región del Libertador General Bernardo O'Higgins</option>
          <option value="9">Región del Maule</option>
          <option value="10">Región de Ñuble</option>
          <option value="11">Región del Biobío</option>
          <option value="12">Región de La Araucanía</option>
          <option value="13">Región de Los Ríos</option>
          <option value="14">Región de Los Lagos</option>
          <option value="15">Región de Aysén del General Carlos Ibáñez del Campo</option>
          <option value="16">Región de Magallanes y de la Antártica Chilena</option>
        </select>
        <div *ngIf="usuarioForm?.get('idRegion')?.hasError('required') && usuarioForm?.get('idRegion')?.touched" class="text-danger">
          <strong>Selecciona una región.</strong>
        </div>
      </div>
      <div class="mb-3 d-flex align-items-center">
        <label for="idComuna" class="form-label me-3">Comuna:</label>
        <select id="idComuna" name="idComuna" class="form-control custom-input" formControlName="idComuna">
          <option value="" selected>Selecciona comuna</option>
          <option value="1">Arica</option>
          <option value="2">Putre</option>
          <option value="3">Camarones</option>
          <option value="4">General Lagos</option>
          <option value="5">Iquique</option>
          <option value="6">Alto Hospicio</option>
          <option value="7">Pica</option>
          <option value="8">Huara</option>
          <option value="9">Camiña</option>
          <option value="10">Antofagasta</option>
          <option value="11">Calama</option>
          <option value="12">Tocopilla</option>
          <option value="13">Mejillones</option>
          <option value="14">Sierra Gorda</option>
          <option value="15">Copiapó</option>
          <option value="16">Vallenar</option>
          <option value="17">Huasco</option>
          <option value="18">Caldera</option>
          <option value="19">Tierra Amarilla</option>
          <option value="20">La Serena</option>
          <option value="21">Coquimbo</option>
          <option value="22">Ovalle</option>
          <option value="23">Illapel</option>
          <option value="24">Salamanca</option>
          <option value="25">Valparaíso</option>
          <option value="26">Viña del Mar</option>
          <option value="27">Quilpué</option>
          <option value="28">Villa Alemana</option>
          <option value="29">Los Andes</option>
          <option value="30">Santiago</option>
          <option value="31">Maipú</option>
          <option value="32">Puente Alto</option>
          <option value="33">La Florida</option>
          <option value="34">Las Condes</option>
          <option value="35">Rancagua</option>
          <option value="36">San Fernando</option>
          <option value="37">Rengo</option>
          <option value="38">Machalí</option>
          <option value="39">Santa Cruz</option>
          <option value="40">Talca</option>
          <option value="41">Curicó</option>
          <option value="42">Linares</option>
          <option value="43">San Clemente</option>
          <option value="44">Constitución</option>
          <option value="45">Chillán</option>
          <option value="46">Chillán Viejo</option>
          <option value="47">Bulnes</option>
          <option value="48">Quirihue</option>
          <option value="49">Coelemu</option>
          <option value="50">Concepción</option>
          <option value="51">Talcahuano</option>
          <option value="52">Coronel</option>
          <option value="53">Los Ángeles</option>
          <option value="54">San Pedro de la Paz</option>
          <option value="55">Temuco</option>
          <option value="56">Padre Las Casas</option>
          <option value="57">Villarrica</option>
          <option value="58">Angol</option>
          <option value="59">Victoria</option>
          <option value="60">Valdivia</option>
          <option value="61">La Unión</option>
          <option value="62">Los Lagos</option>
          <option value="63">Paillaco</option>
          <option value="64">Río Bueno</option>
          <option value="65">Puerto Montt</option>
          <option value="66">Osorno</option>
          <option value="67">Castro</option>
          <option value="68">Ancud</option>
          <option value="69">Quellón</option>
          <option value="70">Coyhaique</option>
          <option value="71">Aysén</option>
          <option value="72">Chile Chico</option>
          <option value="73">Cochrane</option>
          <option value="74">Puerto Aysén</option>
          <option value="75">Punta Arenas</option>
          <option value="76">Puerto Natales</option>
          <option value="77">Porvenir</option>
          <option value="78">Puerto Williams</option>
        </select>
        <div *ngIf="usuarioForm?.get('idComuna')?.hasError('required') && usuarioForm?.get('idComuna')?.touched" class="text-danger">
          <strong>Selecciona una comuna.</strong>
        </div>
      </div>
      <div class="mb-3">
        <label for="idRol">Rol:</label>
        <select id="idRol" formControlName="idRol" class="form-control">
          <option value="1">Administrador</option>
          <option value="2">Moderador</option>
          <option value="3">Emprendedor</option>
          <option value="4">Inversionista</option>
        </select>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary me-3" (click)="modal.dismiss()">Cancelar</button>
    <button type="button" class="btn btn-primary ml-3" (click)="modal.close(usuarioForm.value)">Guardar Cambios</button>
  </div>
</ng-template>
